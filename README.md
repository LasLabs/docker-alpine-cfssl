[![License: Apache 2.0](https://img.shields.io/badge/license-Apache--2.0-blue.svg)](https://www.apache.org/licenses/LICENSE-2.0.html)
[![Build Status](https://travis-ci.org/LasLabs/docker-alpine-cfssl.svg?branch=master)](https://travis-ci.org/LasLabs/docker-alpine-cfssl)

[![](https://images.microbadger.com/badges/image/laslabs/alpine-cfssl.svg)](https://microbadger.com/images/laslabs/alpine-cfssl "Get your own image badge on microbadger.com")
[![](https://images.microbadger.com/badges/version/laslabs/alpine-cfssl.svg)](https://microbadger.com/images/laslabs/alpine-cfssl "Get your own version badge on microbadger.com")

CFSSL - Alpine
==============

This Docker image provides CloudFlare CFSSL based on Alpine Linux

Usage
=====

Volumes
-------

The following volumes are exposed:

| Name | Value | Description |
|------|-------|-------------|
| Cert Store  | /etc/cfssl | All of the certificates generated by the server. |
| Trusted Certs | /cfssl_trust | Trusted certificate store. Defaults to certs provided in CFSSL repo. |


Ports
-----

The following ports are exposed:

| Name | Value |
|------|-------|
| Web  | 8080 |

Environment Variables
---------------------

The following environment variables are available for your configuration pleasure:

| Name | Default | Description |
|------|---------|-------------|
| CA_ROOT_URI | | URI to root CA API. If blank, the new server will be setup as the root CA. Make sure to include the protocol (such as https://) |
| CFSSL_CSR | csr_root_ca.json | CSR config file to initialize new server with. This should be in root of the `/etc/cfssl` mount. |
| CFSSL_CONFIG | ca_root_config.json | Signing profile for the new server. This should be in root of the `/etc/cfssl` mount. |
| DB_CONFIG | db_config.json | Database configuration file for the new server. This should be in root of the `/etc/cfssl` mount. |
| DB_ENVIRONMENT | production | Name of database environment. One of `development`, `test`, `staging`, or `production`, unless you are using a custom Goose `dbconf.yml` |
| DB_DESTROY | 0 | Will destroy any existing database if set to `1`. Forces `DB_INIT` to `1` |
| DB_INIT | 1 | Will run database migration scripts if set to `1`. |


Known Issues / Roadmap
======================

* Add usage instructions
* Lack of HTTPS for API - https://github.com/cloudflare/cfssl/wiki/Add-HTTPS-endpoints-to-CFSSL

Bug Tracker
===========

Bugs are tracked on [GitHub Issues](https://github.com/LasLabs/docker-alpine-cfssl/issues).
In case of trouble, please check there to see if your issue has already been reported.
If you spotted it first, help us smash it by providing detailed and welcomed feedback.

Credits
=======

Contributors
------------

* Dave Lasley <dave@laslabs.com>

Maintainer
----------

[![LasLabs Inc.](https://laslabs.com/logo.png)](https://laslabs.com)

This module is maintained by [LasLabs Inc.](https://laslabs.com)

* https://github.com/LasLabs/docker-alpine-cfssl
